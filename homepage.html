<html>
    <head>
        <title>NUS Academic Planner</title>
        <meta name="description" content="CS3240 Prototype">
        <meta name="author" content="Group10">
        <link rel="stylesheet" type="text/css" href="css/style.css">
        <link href="css/bootstrap.css" rel="stylesheet">
        <link href='https://fonts.googleapis.com/css?family=Poiret+One' rel='stylesheet' type='text/css'>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
        <script type="text/javascript" src="./js/d3.min.js"></script>
    </head>
    
    
    <body>
        <script src="js/jquery-1.12.0.js"></script>
        <script type="text/javascript" src="./js/main.js"></script>
        
        <!--define the homepage style-->
        <div class="container">
            
            <!--header-->
            <div class="header">
                <div class="navbar-brand">
                    <div class = "NUSACP-brand">NUS Academic Planner</div>
                </div>
                
                <!-------------------------------------------------search bar-------------------------------------------------->
                
                <form class="navbar-form" role="search" autocomplete="off">
                <div class="input-group">
                    <input type="text" class="form-control" placeholder="Search / Module Code" name="srch-term" id="srch-term">
                    <div class="results" id="results">
                    </div>
                </div>
                    
                <div class = "profile"><button class = "user" id="user">U</button></div>
            </div>
  
            <!--timetable + graduation panel-->
            <div class="content">
                <div class="col-sm-8">
                    <h3>Timetable</h3>
                    
                    <div class = "timetable">
                        <table class = "table table-bordered">
                            <thead>
                                <tr>
                                    <th>Days</th><th>0800</th><th>1000</th><th>1200</th><th>1400</th><th>1600</th><th>1800</th><th>2000</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <th>Mon</th><td id="1-8"></td><td id="1-10"></td><td id="1-12"></td><td id="1-14"></td><td id="1-16"></td><td id="1-18"></td><td id="1-20"></td>
                                </tr>
                                <tr>
                                    <th>Tue</th><td id="2-8"></td><td id="2-10"></td><td id="2-12"></td><td id="2-14"></td><td id="2-16"></td><td id="2-18"></td><td id="2-20"></td>
                                </tr>
                                <tr>
                                    <th>Wed</th><td id="3-8"></td><td id="3-10"></td><td id="3-12"></td><td id="3-14"></td><td id="3-16"></td><td id="3-18"></td><td id="3-20"></td>
                                </tr>
                                <tr>
                                    <th>Thu</th><td id="4-8"></td><td id="4-10"></td><td id="4-12"></td><td id="4-14"></td><td id="4-16"></td><td id="4-18"></td><td id="4-20"></td>
                                </tr>
                                <tr>
                                    <th>Fri</th><td id="5-8"></td><td id="5-10"></td><td id="5-12"></td><td id="5-14"></td><td id="5-16"></td><td id="5-18"></td><td id="5-20"></td>
                                </tr>
                            </tbody>
                        </table>

                    </div>
                    
                    <div class="buttonoftable">
                        <h3 class="examschedule">Exam Schedule</h3>
                        <input type="button" value="Upload Schedule" id="ScheduleUpload">
                        <input type="button" value="See Recommendation" id="RecommendationUpload"><a href="Recommandation%20Schedule.html"></a>
                    </div>
                                            
                    <div class = "examinfo">
                        <table class = "table table-bordered">
                            <thead>
                                <tr class="examinfotitle">
                                    <td class="tabletitle" style="width:150" align="center">Module Number</td><td style="width:400" align="center">Module Name</td><td align="center">Exam Date</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="examinforow">
                                    <td id="ModuleNumber1"></td><td id="ModuleName1"></td><td id="ExamDate1"></td>
                                </tr>
                                <tr class="examinforow">
                                    <td id="ModuleNumber2"></td><td id="ModuleName2"></td><td id="ExamDate2"></td>
                                </tr>
                                <tr class="examinforow">
                                    <td id="ModuleNumber3"></td><td id="ModuleName3"></td><td id="ExamDate3"></td>
                                </tr>
                                <tr class="examinforow">
                                    <td id="ModuleNumber4"></td><td id="ModuleName4"></td><td id="ExamDate4"></td>
                                </tr>
                                <tr class="examinforow">
                                    <td id="ModuleNumber5"></td><td id="ModuleName5"></td><td id="ExamDate5"></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                </div>
<!----------------------------------------------------Graduation Check Panels------------------------------------>                 
<!----------------------------------------------------Graduation Check Panels------------------------------------>  
<!----------------------------------------------------Graduation Check Panels------------------------------------>  
                <div class="col-sm-4" id="GrduationCheckPanel">
                        <div class="checkbars">
                        
                        <h2>Graduation Progress</h2>
                      
                        <div class="progBars">    
                            
                            <!------------------------------------ ULR requirement progress------------------------------------------>
                            <!------------------------------------ ULR requirement progress------------------------------------------>
                            <div id="ULRbar">University Level Requirement<div class="imgs"><div id="ULR_q"><img src="img/circlequestionmark.png" height="15" width="15" align="right">
                                <span id="popupULR">
                                    <p class="progtips_hl">Students are required to read 20 MCs of the ULR consisting of:</p>
                                    <p class="progtips">(1): 2 x *GEM modules (8 MCs)</p>
                                    <p class="progtips">(2): 1 SS Module(4 MCs)</p>
                                    <p class="progtips">(3): 2 ** ULR Breadth outside student’s Faculty (8 MCs)</p>
                                </span>
                                </div>
                                <button class="ULR_eq" id="ULR_eq"><img src="img/excalmatorymark.png" height="15" width="15" align="right" id="ULR_eq"></button>
                            </div>
                            </div>
                            <div class="progress" id="progBar_ULR">
                                <div class="progress-bar progress-bar-success" id="passmoduleULR" role="progressbar"></div>
                                <div class="progress-bar progress-bar-warning" id="unpassmoduleULR" role="progressbar"></div>
                            </div>
                            <div id="progUpdate_ULR"></div>
                            <div id="progUpdate_ULR_new"></div>

                            <!--------------------------------------- PR requirement progress------------------------------------------>
                            <!--------------------------------------- PR requirement progress------------------------------------------>
                            <div id="PRbar">Programme Requirement<div class="imgs"><div id="PR_q"><img src="img/circlequestionmark.png" height="15" width="15" align="right" id="PR_q">
                                <span id="popupPR">
                                    <p class="progtips_hl">Students are required to read 120 MCs of the PR consisting of:</p>
                                    <p class="progtips">(1): Computer Science Foundation (36 MCs)</p>
                                    <p class="progtips">(2): Computer Science Breadth and Depth (36 MCs)</p>
                                    <p class="progtips">(3): Industrial Experience Requirement (12 MCs)</p>
                                    <p class="progtips">(4): IT Professionalism (12 MCs)</p>
                                    <p class="progtips">(5): Mathematics and Sciences (24 MCs)</p>
                                </span>
                                </div>
                                <button class="PR_eq" id="PR_eq"><img src="img/excalmatorymark.png" height="15" width="15" align="right" id="PR_eq"></button>
                            </div>
                            </div>
                            <div class="progress" id="progBar_PR">
                                <div class="progress-bar progress-bar-success" id="passmodulePR" role="progressbar"></div>
                                <div class="progress-bar progress-bar-warning" id="unpassmodulePR" role="progressbar"></div>
                            </div>
                            <div id="progUpdate_PR"><!-- Success Message --></div>
                            <div id="progUpdate_PR_new"><!-- Success Message --></div>

                            <!--------------------------------------- UEM requirement progress------------------------------------------>
                            <!--------------------------------------- UEM requirement progress------------------------------------------>
                            <div id="UEMbar">Unrestricted Elective Modules<div class="imgs"><div id="UEM_q"><img src="img/circlequestionmark.png" height="15" width="15" align="right" id="UEM_q">
                                <span id="popupUEM">
                                    <p class="progtips_hl">Students are required to read 20 MCs of the UEM can be selected from:</p>
                                    <p class="progtips">(1): Enhancement Programmes</p>
                                    <p class="progtips">(2): BUSINESS requirements</p>
                                    <p class="progtips">(3): Recommended modules</p>
                                    <p class="progtips">(4): Minor Prgs</p>
                                    <p class="progtips">(5): NUS Overseas Colleges (NOC)</p>
                                </span>
                                </div>
                                <button class="UEM_eq" id="UEM_eq"><img src="img/excalmatorymark.png" height="15" width="15" align="right" id="UEM_eq"></button>
                            </div>
                            </div>
                            <div class="progress" id="progBar_UEM">
                                <div class="progress-bar progress-bar-success" id="passmoduleUEM" role="progressbar"></div>
                                <div class="progress-bar progress-bar-warning" id="unpassmoduleUEM" role="progressbar"></div>
                            </div>
                            <div id="progUpdate_UEM"><!-- Success Message --></div>
                            <div id="progUpdate_UEM_new"><!-- Success Message --></div>
                        <!--change progress bar when button is clicked-->
                       
                    </div>
                            
                    <div>
                    <input type="button" value="See Module List" id="MLUpload">
                    <h2>Module List</h2>
                    </div>
                            
                    <div class="infowindow" id="info">
                        <div class="ModuleListAll" id="ModuleListAll"></div>
                        <div class="ModuleListP" id="ModuleListP"></div>
                        <div class="ModuleListU" id="ModuleListU"></div>
                        <div class="ModuleListL" id="ModuleListL" style="display: none"></div>
                    </div>
                </div>
            </div>
<!----------------------------------------------------Graduation Check Panels Ends------------------------------------>   
                <!------------------------------------USER PROFILE-------------------------------------->    
<!------------------------------------USER PROFILE-------------------------------------->  
<!------------------------------------USER PROFILE-------------------------------------->  
        <div class="col-sm-4" id="UserProfileBox">
   
          <div class="panel panel-info">
            <div class="panel-heading">
              <h3 class="panel-title">Lucy Yang</h3>
            </div>
            <div class="panel-body">
              <div class="row">
                <div class="col-md-3 col-lg-3 " align="center"> <img alt="User Pic" src="http://babyinfoforyou.com/wp-content/uploads/2014/10/avatar-300x300.png" class="img-circle img-responsive"> </div>
                <div class=" col-md-9 col-lg-9 "> 
                  <table class="table table-user-information">
                    <tbody class="tableofuserinfo">
                      <tr>
                        <td>Department:</td>
                        <td>School of Computing</td>
                      </tr>
                      <tr>
                        <td>Year</td>
                        <td>2</td>
                      </tr>
                           
                        <tr>
                        <td>Spcific Track</td>
                        <td>N/A</td>
                      </tr>
                      <tr>
                        <td>Email</td>
                        <td><a href="">axxxxxxxa@nus.edu.sg</a></td>
                      </tr>
                        <td>Phone Number</td>
                        <td>86xxxxx</td>
                           
                      </tr>
                     
                    </tbody>
                  </table>
                  
                </div>
              </div>
            </div>  
          </div>
        </div>
            
 <!------------------------------------USER PROFILE-------------------------------------->    
<!------------------------------------USER PROFILE-------------------------------------->  
<!------------------------------------USER PROFILE-------------------------------------->   
                
                
                
        <div id = "missingModWindow"></div>
                
        </div>
                
        <div class="footer">
            <div>
                <div class="col-sm-4">
                    <p class="footerfont">Follow</p>
                </div>
                <div class="col-sm-4">
                    <p class="footerfont">Contact Us</p>
                </div>
                <div class="col-sm-4">
                    <p class="footerfont">Status</p>
                </div>
            </div>
        </div>
        <div class="footer"><p class="footerfontC">Copyright © 2016 NUS Acadamic Plan. All rights reserved.</p></div>
        
          
            
      </div>        
        
<!----------------------------------------------------Scripts------------------------------------>                 
<!----------------------------------------------------Scripts------------------------------------>  
<!----------------------------------------------------Scripts------------------------------------> 
        
         <Script>
                   
             var userModules =[
                       {"id":"CS1010","type":"P","passed":true},
                       {"id":"CS1020","type":"P","passed":true},
                       {"id":"CS1231","type":"P","passed":true},
                       {"id":"LAJ1201","type":"U","passed":true},
                       {"id":"CS2103T","type":"P","passed":true},
                       {"id":"MA1101R","type":"P","passed":true},
                       {"id":"GEK1505","type":"L","passed":true},
                       {"id":"SSA2205","type":"L","passed":true},
                       {"id":"CS3242","type":"P","passed":true}
                 ]; 
             var requireModules =[
                       {"id":"CS1010","type":"P","name":"Programming Methodology","pre":[],"time":"1-8","exam":"2016-Apr-25th"},
                       {"id":"CS1020","type":"P","name":"Data Structures and Algorithms I","pre":["CS1010"],"time":"1-10","exam":"2016-Apr-25th"},
                       {"id":"CS1231","type":"P","name":"Discrete Structures","pre":["CS1010"],"time":"2-10","exam":"2016-Apr-25th"},
                       {"id":"CS2010","type":"P","name":"Data Structures andAlgorithms II","pre":["CS1020"],"time":"3-10","exam":"2016-Apr-25th"},
                       {"id":"CS2100","type":"P","name":"Computer Organisation","pre":["CS1010"],"time":"1-16","exam":"2016-Apr-25th"},
                       {"id":"CS2101","type":"P","name":"Effective Communication for Computing Professionals","pre":[],"time":"3-12","exam":"2016-Apr-25th"},
                       {"id":"CS2102","type":"P","name":"Database system","pre":["CS1231","CS1020"],"time":"4-10","exam":"2016-Apr-25th"},
                       {"id":"CS2103T","type":"P","name":"Software Engineering","pre":["CS1020"],"time":"5-10","exam":"2016-Apr-25th"},
                       {"id":"CS2105","type":"P","name":"Introduction to computer networks","pre":["CS1020"],"time":"3-18","exam":"2016-Apr-25th"},
                       {"id":"CS3240","type":"P","name":"Interaction Design","pre":["CS1020"],"time":"3-12","exam":"2016-Apr-25th"},
                       {"id":"CS3241","type":"P","name":"Computer Graphics","pre":["CS1020","PC1221"],"time":"4-8","exam":"2016-Apr-25th"},
                       {"id":"IS1103","type":"P","name":"Computing and society","pre":[],"time":"2-12","exam":"2016-Apr-25th"},
                       {"id":"MA1101R","type":"P","name":"Linear Algebra I","pre":[],"time":"5-8","exam":"2016-Apr-25th"},
                       {"id":"CS3242","type":"P","name":"3D Modeling and Animation","pre":["CS3241","PC1221","MA1521","MA1101R"],"time":"4-10","exam":"2016-Apr-25th"},
                       {"id":"MA1521","type":"P","name":"Calculus for Computing","pre":[],"time":"4-8","exam":"2016-Apr-25th"},
                       {"id":"MA1301","type":"P","name":"Introductory Mathematics","pre":[],"time":"4-12","exam":"2016-Apr-25th"},
                       {"id":"SS","type":"L","name":"Social Study","pre":[],"time":"5-16","exam":"2016-Apr-25th"},
                       {"id":"ST2334","type":"P","name":"Probability and Statics","pre":["MA1521"],"time":"3-16","exam":"2016-Apr-25th"},
                       {"id":"PC1221","type":"P","name":"Fundamental Physics I","pre":[],"time":"1-16","exam":"2016-Apr-25th"},
                       {"id":"LAJ1201","type":"U","name":"Japanese I","pre":[],"time":"2-18","exam":"2016-Apr-25th"},
                       {"id":"GEK1505","type":"L","name":"Living with Mathematics","pre":[],"time":"4-12","exam":"2016-Apr-25th"},
                       {"id":"SSA2205","type":"L","name":"Singapore and Japan","pre":[],"time":"5-12","exam":"2016-Apr-25th"},
                       {"id":"GEM2900","type":"L","name":"UNDERSTAND'G UNCERTAINTY & STATS THINK'G","pre":[],"time":"4-10","exam":"2016-Apr-25th"},
                       {"id":"LAJ2202","type":"U","name":"Japanese 3","pre":["LAJ2201"],"time":"4-8","exam":"2016-Apr-25th"},
                       {"id":"LAJ2201","type":"U","name":"Japanese 2","pre":["LAJ1201"],"time":"4-8","exam":"2016-Apr-25th"}
                 ];  
             var tableModules =[
                 ]; 
                            
                findMType(userModules);
                seeModuleList(userModules);

             /******************************************************Progress Bar Percentage********************************************/
             /******************************************************Progress Bar Percentage*****************************************/
                function findMType(userModules){
                var ModuleNo = userModules.length;  //number of module depends on users' modules
                var No_ULR = 0, No_UEM = 0, No_PR = 0, future_ULR = 0, future_UEM = 0, future_PR = 0;
                var i = 0;
                for (i = 0; i < ModuleNo; i++) {
                    if (userModules[i].type == "P") {
                        if(userModules[i].passed){
                            No_PR++;
                        }
                        else{
                            future_PR++;
                        }
                    }
                    else if(userModules[i].type == "L"){
                        if(userModules[i].passed){
                            No_ULR++;
                        }
                        else{
                            future_ULR++;
                        }
                    }
                    else if(userModules[i].type == "U"){
                        if(userModules[i].passed){
                            No_UEM++;
                        }
                        else{
                            future_UEM++;
                        }
                    }
                    else{
                        return false;
                    }
                };    
                    progBarLoad('progBar_ULR',20*No_ULR,20*future_ULR,'progUpdate_ULR'); 
                    progBarLoad('progBar_PR',(3/10)*No_PR,(3/10)*future_PR,'progUpdate_PR'); 
                    progBarLoad('progBar_UEM',20*No_UEM,20*future_UEM,'progUpdate_UEM'); 
                }
             
                /*******************************************used to update the progress bar********************************************/           /*******************************************used to update the progress bar********************************************/           
                function progBarLoad(progBar_Name,progBar_update,progBar_unpass,progUpdate_Name){

                    var futureCompelte = progBar_update + progBar_unpass;
                    futureCompelte = Number((futureCompelte).toFixed(1));
                    progBar_update = Number((progBar_update).toFixed(1));
                    
                    if(progBar_Name == "progBar_ULR"){
                        $('#passmoduleULR').css("width",progBar_update+'%');
                        $('#unpassmoduleULR').css("width",progBar_unpass+'%');
                        if(progBar_update < 100){
                            if(progBar_update == futureCompelte){
                                $('#progUpdate_ULR').empty().append(futureCompelte + "% Completion");
                            }
                            else{
                            $('#progUpdate_ULR').empty().append(progBar_update + "to" + futureCompelte + "% Completion");
                            }
                            $('#progUpdate_ULR_new').empty().append(progBar_update/20*4 + "/20 MC");
                        }
                        else{
                            $('#progUpdate_ULR').empty().append("Requirements Completed");
                        }
                    }
                    else if(progBar_Name == "progBar_PR"){
                        $('#passmodulePR').css("width",progBar_update+'%');
                        $('#unpassmodulePR').css("width",progBar_unpass+'%');
                        if(progBar_update < 100){
                            if(progBar_update == futureCompelte){
                                $('#progUpdate_PR').empty().append(futureCompelte + "% Completion");
                            }
                            else{
                                $('#progUpdate_PR').empty().append(progBar_update + "to" + futureCompelte + "% Completion");
                            }
                            $('#progUpdate_PR_new').empty().append( progBar_update/(3/10)*4 + "/120 MC");
                        }
                        else{
                            $('#progUpdate_PR').empty().append("Requirements Completed");
                        }
                    }
                    else if(progBar_Name == "progBar_UEM"){
                        $('#passmoduleUEM').css("width",progBar_update+'%');
                        $('#unpassmoduleUEM').css("width",progBar_unpass+'%');
                        if(progBar_update < 100){
                            if(progBar_update == futureCompelte){
                                $('#progUpdate_UEM').empty().append(futureCompelte + "% Completion");
                            }
                            else{
                                $('#progUpdate_UEM').empty().append(progBar_update +" to " + futureCompelte + "% Completion");
                            }
                            $('#progUpdate_UEM_new').empty().append(progBar_update/20*4 + "/20 MC");
                        }
                        else{
                            $('#progUpdate_UEM').empty().append("Requirements Completed");
                        }
                    }

                }
             
                /*******************************************Sort module and add to list********************************************/           /*******************************************Sort module and add to list********************************************/
                function seeModuleList(userModules){
                    
                    var ModuleListAll = document.getElementById('ModuleListAll');
                    var ModuleListP = document.getElementById('ModuleListP');
                    var ModuleListU = document.getElementById('ModuleListU');
                    var ModuleListL = document.getElementById('ModuleListL');
                    var i,NoPass = 0;
                    
                    ModuleListAll.innerHTML = "";
                    ModuleListP.innerHTML = "";
                    ModuleListU.innerHTML = "";
                    ModuleListL.innerHTML = "";
                    
                    //sort the userModules at beginning
                    for(i = 0; i < userModules.length; i++){
                        if(!userModules[i].passed){
                            var tempid;
                            tempid = userModules[i].id;
                            userModules[i].id = userModules[NoPass].id;
                            userModules[NoPass].id = tempid;
                            var temppassed;
                            temppassed = userModules[i].passed;
                            userModules[i].passed = userModules[NoPass].passed;
                            userModules[NoPass].passed = temppassed;
                            var temptype;
                            temptype = userModules[i].type;
                            userModules[i].type = userModules[NoPass].type;
                            userModules[NoPass].type = temptype;
                            NoPass++;
                        }
                    }
                    
                    //create a specific list for modules
                    for(i = 0; i < userModules.length; i++ ){
                        var id = userModules[i].id;
                        var mod = findModule(id);
                        var button = createModButtone(mod)
                        if(userModules[i].type=="P"){
                            ModuleListP.appendChild(button);
                        }
                        else if(userModules[i].type=="U"){
                            ModuleListU.appendChild(button);
                        }
                        else if(userModules[i].type=="L"){
                            ModuleListL.appendChild(button);
                        }
                    }
                    
                    //create total module list
                    for(i = 0; i < userModules.length; i++ ){
                        var id = userModules[i].id;
                        var mod = findModule(id);
                        var button = createModButtone(mod);
                        ModuleListAll.appendChild(button);
                    }
                    $('.infowindow').on('mouseenter','button',function(e){
                        var id = $(this).first().children().first().text();
                        var mod = findModule(id);

                        var missing = findMissingModule(mod);
                        if(missing.length>0){
                            var missingMods = document.getElementById('missingModWindow');
                            missingMods.innerHTML="";
                            var x = e.clientX;
                            var y = e.clientY;
                            missingMods.style.left=x;
                            missingMods.style.top=y;
                            missingMods.style.display="block";
                            for(s=0;s<missing.length;s++){
                                var m = findModule(missing[s]);
                                var b = createModButtone(m);
                                missingMods.appendChild(b);
                            }
                        }
                    });
                    $('.infowindow').on('mouseleave','button',function(e){
                        var e = document.getElementById('missingModWindow');
                            e.style.display="none";
                    });
                    return false;
                    
                }
             
                 /*******************************************Show different List********************************************/           /*******************************************Show different List********************************************/             
                $("#ULR_eq").click(function(){
                    $("#ModuleListAll").css("display","none");
                    $("#ModuleListU").css("display","none");
                    $("#ModuleListP").css("display","none");
                    $("#ModuleListL").css("display","block");
                    return false;
                });
             
                $("#UEM_eq").click(function(){
                    $("#ModuleListAll").css("display","none");
                    $("#ModuleListU").css("display","block");
                    $("#ModuleListP").css("display","none");
                    $("#ModuleListL").css("display","none");
                    return false;
                });
             
                $("#PR_eq").click(function(){
                    $("#ModuleListAll").css("display","none");
                    $("#ModuleListU").css("display","none");
                    $("#ModuleListP").css("display","block");
                    $("#ModuleListL").css("display","none");
                    return false;
                });
             
                $("#MLUpload").click(function(){
                    $("#ModuleListAll").css("display","block");
                    $("#ModuleListU").css("display","none");
                    $("#ModuleListP").css("display","none");
                    $("#ModuleListL").css("display","none");
                    return false;
                });

             
/*******************************************Search Bar Showing********************************************/           /*******************************************Search Bar Showing********************************************/ 
                var i;
                $('#srch-term').on('input',function(){
                    var InputModule;
                    var x = document.getElementById("srch-term").value;
                        $('#results').css("display","block");
                    var self = document.getElementById('results');
                            self.innerHTML="";
                    if(x.length ==0){
                        $('#results').css("display","none");
                    }
                    if(x.length >= 1){
                        InputModule = x;
                        var results = matchModule(InputModule);
                        if(results.length==0){
                            //var id = document.createTextNode("No Match");
                            //self.appendChild(id);
                            $('#results').css("font-size",15+'px');
                            $('#results').css("padding-top",5+'px');
                            $('#results').css("padding-bottom",5+'px');
                            $('#results').append("No Matches Found");
                        }
                        else{
                            for(var i = 0;i<results.length;i++){
                                var button = createModButtone(results[i]);
                                self.appendChild(button);
                            }
                            
                            
                            $('.results').on('mouseenter','button',function(e){
                                var id = $(this).first().children().first().text();
                                var mod = findModule(id);
                                
                                var missing = findMissingModule(mod);
                                if(missing.length>0){
                                    var missingMods = document.getElementById('missingModWindow');
                                    missingMods.innerHTML="";
                                    var x = e.clientX;
                                    var y = e.clientY;
                                    missingMods.style.left=x-200;
                                    missingMods.style.top=y;
                                    missingMods.style.display="block";
                                    for(s=0;s<missing.length;s++){
                                        var m = findModule(missing[s]);
                                        var b = createModButtone(m);
                                        missingMods.appendChild(b);
                                    }
                                }
                            });
                            $('.results').on('mouseleave','button',function(e){
                                var e = document.getElementById('missingModWindow');
                                    e.style.display="none";
                            });
                        }
                    }
                });
             
                 $('.results').on('click','button',function(e){
                    var id = $(this).first().children().first().text();
                    var mod = findModule(id);
                    
                    var checkpassed = checkPass(id,userModules);
                    var missing = findMissingModule(mod);
                    if(missing.length>0){
                        alert("Pre-requist is not fulfilled");
                        return false;
                    }
                    else if(checkpassed){
                        alert("You have passed this module");
                        return false;
                    }
                    else{
                        var time = mod.time;
                        var TimeSlot = document.getElementById(time);
                        var FindClash = TimeSlot.childNodes.length;
                        if(FindClash >= 1){
                            alert("clash!");
                        }
                        else{                            
                            var code = document.createTextNode(id);
                            var slot = document.createElement('div');
                            TimeSlot.style.backgroundColor="#CEE3F6";
                            slot.appendChild(code);
                            TimeSlot.appendChild(slot);
                            var newMod = {"id":id,"type":mod.type,"passed":false};
                            userModules.push(newMod);
                            seeModuleList(userModules);
                            findMType(userModules);
                            
                            var ModuleName = document.createElement("p");
                            var ModuleNumber = document.createElement("p");
                            var ModuleDate = document.createElement("p");
                            ModuleName = id;
                            ModuleNumber = mod.name;
                            ModuleDate = mod.exam;
                            
                            var checkEmpty = document.getElementById('ModuleNumber1');
                            var checkClash = checkEmpty.childNodes.length;
                            if(checkClash>=1){
                                var checkEmpty = document.getElementById('ModuleNumber2');
                                var checkClash = checkEmpty.childNodes.length;
                                if(checkClash>=1){
                                    var checkEmpty = document.getElementById('ModuleNumber3');
                                    var checkClash = checkEmpty.childNodes.length;
                                    if(checkClash>=1){
                                        var checkEmpty = document.getElementById('ModuleNumber4');
                                        var checkClash = checkEmpty.childNodes.length;
                                        if(checkClash>=1){
                                            $('#ModuleNumber5').empty().append(ModuleName);
                                            $('#ModuleName5').empty().append(ModuleNumber);
                                            $('#ExamDate5').empty().append(ModuleDate);
                                            return false;
                                        }
                                        else{
                                            $('#ModuleNumber4').empty().append(ModuleName);
                                            $('#ModuleName4').empty().append(ModuleNumber);
                                            $('#ExamDate4').empty().append(ModuleDate);
                                            return false;
                                        }
                                    }
                                    else{
                                        $('#ModuleNumber3').empty().append(ModuleName);
                                        $('#ModuleName3').empty().append(ModuleNumber);
                                        $('#ExamDate3').empty().append(ModuleDate);
                                        return false;
                                    }
                                }
                                else{
                                    $('#ModuleNumber2').empty().append(ModuleName);
                                    $('#ModuleName2').empty().append(ModuleNumber);
                                    $('#ExamDate2').empty().append(ModuleDate);
                                    return false;
                                }
                            }
                            else{
                                $('#ModuleNumber1').empty().append(ModuleName);
                                $('#ModuleName1').empty().append(ModuleNumber);
                                $('#ExamDate1').empty().append(ModuleDate);
                            } 
                            return false;
                        }
                    }

                });
            
                function createModButtone(mod){
                    var button = document.createElement('button');
                    button.setAttribute('id','module_select');
                    var idd = document.createElement('div');
                    var id = document.createTextNode(mod.id);
                    idd.appendChild(id);
                    idd.style.float='left';
                    idd.style.marginRight="3px";
                    var name = document.createTextNode(""+mod.name);

                    button.appendChild(idd);
                    button.appendChild(name);
                    var state = "AVAILABLE";
                    var userModule;
                    for(k=0;k<userModules.length;k++){
                        if(userModules[k].id==mod.id&&userModules[k].passed){
                            state="PASS";
                        }
                    }
                    var mod = findModule(mod.id);
                    var missing = findMissingModule(mod);
                    if(missing.length>0){
                        state = "LOCK";
                        
                    }
                    var stateE = document.createTextNode(state);
                    var stateDiv = document.createElement('div');
                    stateDiv.style.cssFloat="right";
                    stateDiv.appendChild(stateE);
                    button.appendChild(stateDiv);
                    if(mod.type=="P"){
                        if(state == "PASS"){
                            button.style.backgroundColor= "#81F79F";
                        }
                        else{
                            button.style.backgroundColor= "#A9F5A9";
                        }
                    }
                    else if(mod.type=="U"){
                        if(state == "PASS"){
                            button.style.backgroundColor= "#81BEF7";
                        }
                        else{
                            button.style.backgroundColor= "#A9D0F5";
                        }
                    }
                    else if(mod.type=="L"){
                        if(state == "PASS"){
                            button.style.backgroundColor= "#F3F781";
                        }
                        else{
                            button.style.backgroundColor= "#F2F5A9";
                        }
                    }
                    if(state=="LOCK"){
                        button.style.backgroundColor= "#FF9999";
                    }
                    return button;
                }
                function matchModule(InputModule){
                    var searchResult = [];
                    var input = InputModule.toLowerCase();
                    for(i = 0; i < requireModules.length;i++){
                        var match = requireModules[i].id.toLowerCase();
                        if(match.indexOf(input)>=0){
                            searchResult.push(requireModules[i]);
                        }
                    }
                    return searchResult;
                }
                function findModule(id){
                    for(j=0;j<requireModules.length;j++){
                        if(requireModules[j].id==id){
                            return requireModules[j];
                        }
                    }
                    return null;
                }
                function findMissingModule(mod){
                    var missing=[];
                    var req = mod.pre;
                    for(j=0;j<req.length;j++){
                        var taken = false;
                        for(w=0;w<userModules.length;w++){
                            if(userModules[w].id==req[j]&&userModules[w].passed){
                                taken = true;
                            }
                        }
                        if(!taken){
                              missing.push(req[j]);
                        }
                    }
                    return missing;
                }
             
                function checkPass(mod,userModules){
                    var i;
                    for(i = 0;i <userModules.length;i++){
                        if(mod == userModules[i].id){
                            if(userModules[i].passed){
                                return true;
                            }
                            else{
                                return false;
                            }
                        }
                    }
                }
                /*function fillinTable(InputModule){
                    var Input = InputModule;
                    $('#module_select').click(function(){
                        alert("a");
                        var TimeSlot = document.getElementById('ModuleSlot1');
                        var FindClash = TimeSlot.childNodes.length;
                        if(FindClash >= 1){
                            alert("clash!");
                        }
                        else{
                            var Slot = document.createElement("p");
                            TimeSlot.appendChild(Slot);
                            $('#ModuleSlot1').css("font-size",8+'px');
                            $('#ModuleSlot1').css("background-color","aliceblue");
                            $('#ModuleSlot1').append(Input);
                        }
                    });
                }*/
    
                $(document).click(function(e) {
                    var target = e.target;

                    if (!$(target).is('#srch-term') && !$(target).parents().is('#srch-term')) {
                        $('#results').hide();
                    }
                });
/***************************************************** User profile ************************************************/
/***************************************************** User profile ************************************************/

              $("#user").click(function(){
                  $("#UserProfileBox").toggle();
                  $("#GrduationCheckPanel").toggle();
                  return false;
              });
             
/***************************************************** User profile ************************************************/
/***************************************************** User profile ************************************************/
            </Script>        
        
    </body>
</html>