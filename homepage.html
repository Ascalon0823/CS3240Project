<html>
    <head>
        <title>NUS Academic Planner</title>
        <meta name="description" content="CS3240 Prototype">
        <meta name="author" content="Group10">
        <link rel="stylesheet" type="text/css" href="css/style.css">
        <link href="css/bootstrap.css" rel="stylesheet">
        <link href='https://fonts.googleapis.com/css?family=Poiret+One' rel='stylesheet' type='text/css'>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
        <script type="text/javascript" src="./js/d3.min.js"></script>
    </head>
    
    
    <body>
        <script src="js/jquery-1.12.0.js"></script>
        <script type="text/javascript" src="./js/main.js"></script>
        
        <!--define the homepage style-->
        <div class="container">
            
            <!--header-->
            <div class="header">
                <div class="navbar-brand">
                    <div class = "NUSACP-brand">NUS Academic Planner</div>
                </div>
                <form class="navbar-form" role="search">
                <div class="input-group">
                    <input type="text" class="form-control" placeholder="Search / Module Code" name="srch-term" id="srch-term">
                </div>
                <div class = "profile"><button class = "user">U</button></div>
            </div>
  
            <!--timetable + graduation panel-->
            <div class="content">
                <div class="col-sm-8">
                    <h3>Timetable</h3>
                    
                    <div class = "timetable">
                        <table class = "table table-bordered">
                            <thead>
                                <tr>
                                    <th>Days</th><th>0800</th><th>1000</th><th>1200</th><th>1400</th><th>1600</th><th>1800</th><th>2000</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <th>Mon</th><th></th><th></th><th></th><th></th><th></th><th></th><th></th>
                                </tr>
                                <tr>
                                    <th>Tue</th><th></th><th></th><th></th><th></th><th></th><th></th><th></th>
                                </tr>
                                <tr>
                                    <th>Wed</th><th></th><th></th><th></th><th></th><th></th><th></th><th></th>
                                </tr>
                                <tr>
                                    <th>Thu</th><th></th><th></th><th></th><th></th><th></th><th></th><th></th>
                                </tr>
                                <tr>
                                    <th>Fri</th><th></th><th></th><th></th><th></th><th></th><th></th><th></th>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <input type="text" class="timetable" name="inputtable" id="testtable">
                    <input type="button" value="Add module" id="btnAdd">  <!--used to add modules-->
                    <input type="button" value="Begin Upload" id="btnUpload">  <!--final submit of module list-->
                    <output type="text" class="i" id="index"></output>
                    
                </div>
<!----------------------------------------------------Graduation Check Panels------------------------------------>                 
<!----------------------------------------------------Graduation Check Panels------------------------------------>  
<!----------------------------------------------------Graduation Check Panels------------------------------------>  
                <div class="col-sm-4">
                        <div class="checkbars">
                        
                        <h2>Graduation Progress</h2>
                      
                        <div class="progBars">    
                            
                            <!------------------------------------ ULR requirement progress------------------------------------------>
                            <!------------------------------------ ULR requirement progress------------------------------------------>
                            <div id="ULRbar">University Level Requirement<div id="ULR_q"><img src="img/circlequestionmark.png" height="15" width="15" align="right">
                                <span id="popupULR">
                                    <p class="progtips_hl">Students are required to read 20 MCs of the ULR consisting of:</p>
                                    <p class="progtips">(1): 2 x *GEM modules (8 MCs)</p>
                                    <p class="progtips">(2): 1 SS Module(4 MCs)</p>
                                    <p class="progtips">(3): 2 ** ULR Breadth outside studentâ€™s Faculty (8 MCs)</p>
                                </span>
                                </div>
                            </div>
                            <progress value="0" max="100" id="progBar_ULR">
                                <span id="downloadProgress"><!-- Your fallback goes here --></span>
                            </progress>
                            <div id="progUpdate_ULR"><!-- Success Message --></div>

                            <!--------------------------------------- PR requirement progress------------------------------------------>
                            <!--------------------------------------- PR requirement progress------------------------------------------>
                            <div id="PRbar">Programme Requirement<div id="PR_q"><img src="img/circlequestionmark.png" height="15" width="15" align="right" id="PR_q">
                                <span id="popupPR">
                                    <p class="progtips_hl">Students are required to read 120 MCs of the PR consisting of:</p>
                                    <p class="progtips">(1): Computer Science Foundation (36 MCs)</p>
                                    <p class="progtips">(2): Computer Science Breadth and Depth (36 MCs)</p>
                                    <p class="progtips">(3): Industrial Experience Requirement (12 MCs)</p>
                                    <p class="progtips">(4): IT Professionalism (12 MCs)</p>
                                    <p class="progtips">(5): Mathematics and Sciences (24 MCs)</p>
                                </span>
                                </div>
                            </div>
                            <progress value="0" max="100" id="progBar_PR">
                                <span id="downloadProgress"><!-- Your fallback goes here --></span>
                            </progress>
                            <div id="progUpdate_PR"><!-- Success Message --></div>

                            <!--------------------------------------- UEM requirement progress------------------------------------------>
                            <!--------------------------------------- UEM requirement progress------------------------------------------>
                            <div id="UEMbar">Unrestricted Elective Modules<div id="UEM_q"><img src="img/circlequestionmark.png" height="15" width="15" align="right" id="UEM_q">
                                <span id="popupUEM">
                                    <p class="progtips_hl">Students are required to read 20 MCs of the UEM can be selected from:</p>
                                    <p class="progtips">(1): Enhancement Programmes</p>
                                    <p class="progtips">(2): BUSINESS requirements</p>
                                    <p class="progtips">(3): Recommended modules</p>
                                    <p class="progtips">(4): Minor Prgs</p>
                                    <p class="progtips">(5): NUS Overseas Colleges (NOC)</p>
                                </span>
                                </div>
                            </div>
                            <progress value="0" max="100" id="progBar_UEM">
                                <span id="downloadProgress"><!-- Your fallback goes here --></span>
                            </progress>
                            <div id="progUpdate_UEM"><!-- Success Message --></div>
                            
                        <!--change progress bar when button is clicked-->
                       
                    </div>
                    <h2>Module List</h2>
                    <div class="infowindow" id="info">
                    </div>
                </div>
            </div>
<!----------------------------------------------------Graduation Check Panels Ends------------------------------------>                 

        
        </div>
        
<!----------------------------------------------------Scripts------------------------------------>                 
<!----------------------------------------------------Scripts------------------------------------>  
<!----------------------------------------------------Scripts------------------------------------> 
        
         <Script>
                   
             var userModules =[
                       {"id":"CS1010","type":"P","passed":true,"pre":[]},
                       {"id":"CS1020","type":"P","passed":true,"pre":["CS1010"]},
                       {"id":"CS1231","type":"P","passed":true},
                       {"id":"LAJ1201","type":"U","passed":true},
                       {"id":"CS2103","type":"P","passed":true},
                       {"id":"MA1101R","type":"P","passed":true},
                       {"id":"GEK1505","type":"L","passed":true},
                       {"id":"SSA2205","type":"L","passed":true},
                       {"id":"CS3242","type":"P","passed":false}
                 ]; 
             var requireModules =[
                       {"id":"CS1010","type":"P"},
                       {"id":"CS1020","type":"P"},
                       {"id":"CS1231","type":"P"},
                       {"id":"CS2010","type":"P"},
                       {"id":"CS2100","type":"P"},
                       {"id":"CS2101","type":"P"},
                       {"id":"CS2102","type":"P"},
                       {"id":"CS2103T","type":"P"},
                       {"id":"CS2105","type":"P"},
                       {"id":"CS3240","type":"P"},
                       {"id":"CS3241","type":"P"},
                       {"id":"IS1103","type":"P"},
                       {"id":"MA1101R","type":"P"},
                       {"id":"MA1521","type":"P"},
                       {"id":"MA1301","type":"P"},
                       {"id":"SS","type":"L"},
                       {"id":"ST2334","type":"P"}
                 ];  
                            
                findMType(userModules);

                function findMType(userModules){
                var ModuleNo = userModules.length;  //number of module depends on users' modules
                var No_ULR = 0, No_UEM = 0, No_PR = 0;
                var i = 0;
                for (i = 0; i < ModuleNo; i++) {
                    if (userModules[i].type == "P") {
                        if(userModules[i].passed){
                            No_PR++;
                        }
                    }
                    else if(userModules[i].type == "L"){
                        if(userModules[i].passed){
                            No_ULR++;
                        }
                    }
                    else if(userModules[i].type == "U"){
                        if(userModules[i].passed){
                            No_UEM++;
                        }
                    }
                    else{
                        return false;
                    }
                };    
                    progBarLoad('progBar_ULR',20*No_ULR,'progUpdate_ULR'); 
                    progBarLoad('progBar_PR',(3/10)*No_PR,'progUpdate_PR'); 
                    progBarLoad('progBar_UEM',20*No_UEM,'progUpdate_UEM'); 
                }
                                          
                //used to update the progress bar
                function progBarLoad(progBar_Name,progBar_update,progUpdate_Name){

                    var bar = document.getElementById(progBar_Name),
                        fallback = document.getElementById('downloadProgress'),
                        loaded = 0;

                    var Endloaded = loaded + progBar_update; //show how many modules have been read in pass state

                    var load = function() {
                        loaded += progBar_update;
                        bar.value = loaded;
                        if(progUpdate_Name == 'progUpdate_UEM'){
                            if (loaded == Endloaded) {
                                if(loaded != 100){
                                    $('#progUpdate_UEM').empty().append(loaded + "% Completion");
                                }
                                else{
                                    $('#progUpdate_UEM').empty().append("Requirements Completed");
                                }
                            }
                        }
                        else if(progUpdate_Name == 'progUpdate_ULR'){
                            if (loaded == Endloaded) {
                                if(loaded != 100){
                                    $('#progUpdate_ULR').empty().append(loaded + "% Completion");
                                }
                                else{
                                    $('#progUpdate_ULR').empty().append("Requirements Completed");
                                }
                            }
                        }
                        else if(progUpdate_Name == 'progUpdate_PR'){

                            if (loaded == Endloaded) {
                                if(loaded != 100){
                                    $('#progUpdate_PR').empty().append(loaded + "% Completion");
                                }
                                else{
                                    $('#progUpdate_PR').empty().append("Requirements Completed");
                                }
                            }
                        }
                    };
                    load();
                }
             
                            for(var i in userModules){
                                var button = document.createElement('button');
                                var id = document.createTextNode(userModules[i].id);
                                var state = "PASS";
                                if(!userModules[i].passed){
                                    state="AVAILABLE"
                                }
                                var stateE = document.createTextNode(state);
                                var stateDiv = document.createElement('div');
                                stateDiv.style.cssFloat="right";
                                button.appendChild(id);
                                stateDiv.appendChild(stateE);
                                button.appendChild(stateDiv);
                                var self=document.getElementById('info');
                                if(userModules[i].type=="P"){
                                    button.style.backgroundColor= "#B4FFA3";
                                }else if(userModules[i].type=="M"){
                                    button.style.backgroundColor= "#00F3FF";
                                }
                                else if(userModules[i].type=="U"){
                                    button.style.backgroundColor= "#F5ACEE";
                                }
                                else if(userModules[i].type=="L"){
                                    button.style.backgroundColor= "#FEFF80";
                                }
                                self.appendChild(button);
                            }
             
                        </Script>
        
        
        
    </body>
</html>