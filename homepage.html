<html>
    <head>
        <title>NUS Academic Planner</title>
        <meta name="description" content="CS3240 Prototype">
        <meta name="author" content="Group10">
        <link rel="stylesheet" type="text/css" href="css/style.css">
        <link href="css/bootstrap.css" rel="stylesheet">
        <link href='https://fonts.googleapis.com/css?family=Poiret+One' rel='stylesheet' type='text/css'>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
        <script type="text/javascript" src="./js/d3.min.js"></script>
    </head>
    
    
    <body>
        <script src="js/jquery-1.12.0.js"></script>
        <script type="text/javascript" src="./js/main.js"></script>
        
        <!--define the homepage style-->
        <div class="container">
            
            <!--header-->
            <div class="header">
                <div class="navbar-brand">
                    <div class = "NUSACP-brand">NUS Academic Planner</div>
                </div>
                <form class="navbar-form" role="search">
                <div class="input-group">
                    <input type="text" class="form-control" placeholder="Search / Module Code" name="srch-term" id="srch-term">
                </div>
                <div class = "profile"><button class = "user">U</button></div>
            </div>
  
            <!--timetable + graduation panel-->
            <div class="content">
                <div class="col-sm-8">
                    <h3>Timetable</h3>
                    
                    <div class = "timetable">
                        <table class = "table table-bordered">
                            <thead>
                                <tr>
                                    <th>Days</th><th>0800</th><th>1000</th><th>1200</th><th>1400</th><th>1600</th><th>1800</th><th>2000</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <th>Mon</th><th></th><th></th><th></th><th></th><th></th><th></th><th></th>
                                </tr>
                                <tr>
                                    <th>Tue</th><th></th><th></th><th></th><th></th><th></th><th></th><th></th>
                                </tr>
                                <tr>
                                    <th>Wed</th><th></th><th></th><th></th><th></th><th></th><th></th><th></th>
                                </tr>
                                <tr>
                                    <th>Thu</th><th></th><th></th><th></th><th></th><th></th><th></th><th></th>
                                </tr>
                                <tr>
                                    <th>Fri</th><th></th><th></th><th></th><th></th><th></th><th></th><th></th>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <input type="text" class="timetable" name="inputtable" id="testtable">
                    <input type="button" value="Add module" id="btnAdd">  <!--used to add modules-->
                    <input type="button" value="Begin Upload" id="btnUpload">  <!--final submit of module list-->
                    <output type="text" class="i" id="index"></output>
                    
                </div>
<!----------------------------------------------------Graduation Check Panels------------------------------------>                 
<!----------------------------------------------------Graduation Check Panels------------------------------------>  
<!----------------------------------------------------Graduation Check Panels------------------------------------>  
                <div class="col-sm-4">
                        <div class="checkbars">
                        
                        <h2>Graduation Progress</h2>
                      
                        <div class="progBars">    
                                
                            <div id="ULRbar">University Level Requirement<div id="ULR_q"><img src="img/circlequestionmark.png" height="15" width="15" align="right">
                                <span id="popupULR">
                                    <p class="progtips">Students are required to read 20 MCs of the ULR consisting of:</p>
                                    <p class="progtips">(1): 2 x *GEM modules (8 MCs)</p>
                                    <p class="progtips">(2): 1 SS Module(4 MCs)</p>
                                    <p class="progtips">(3): 2 ** ULR Breadth outside studentâ€™s Faculty (8 MCs)</p>
                                </span>
                                <script>
                                    var tips = document.getElementById('popupULR');
                                    
                                    window.onmousemove = function(d){
                                        var x = d.clientX,
                                            y = d.clientY;
                                        tips.style.top = (y+20) + 'px';
                                        tips.style.left = (x+20) +'px';
                                    }
                                </script>
                                </div>
                            </div>
                            
                            <progress value="0" max="100" id="progBar_ULR">
                                <span id="downloadProgress">
                                    <!-- Your fallback goes here -->
                                </span>
                            </progress>
                            <div id="progUpdate_ULR">
                                    <!-- Success Message -->
                            </div>

                            <h5>Faculty Requirement<img src="img/circlequestionmark.png" height="15" width="15" align="right" id="FR_q"></h5>
                            <progress value="0" max="100" id="progBar_FR">
                                <span id="downloadProgress">
                                    <!-- Your fallback goes here -->
                                </span>
                            </progress>
                            <div id="progUpdate_FR">
                                    <!-- Success Message -->
                            </div>

                            <h5>Major Requirement<img src="img/circlequestionmark.png" height="15" width="15" align="right" id="MR_q"></h5>
                            <progress value="0" max="100" id="progBar_MR">
                                <span id="downloadProgress">
                                    <!-- Your fallback goes here -->
                                </span>
                            </progress>
                            <div id="progUpdate_MR">
                                    <!-- Success Message -->
                            </div>
                
                            <h5>Unristrcted Electvie Modules<img src="img/circlequestionmark.png" height="15" width="15" align="right" id="UEM_q"></h5>
                            <progress value="0" max="100" id="progBar_UEM">
                                <span id="downloadProgress">
                                    <!-- Your fallback goes here -->
                                </span>
                            </progress>
                            <div id="progUpdate_UEM">
                                    <!-- Success Message -->
                            </div>
                            
                            
                        <!--change progress bar when button is clicked-->
                       
                    </div>
 
                    <h3>   </h3>    
                    
                    <div class="infowindow" id="info">
                    </div>
                </div>
            </div>
<!----------------------------------------------------Graduation Check Panels------------------------------------>                 
<!----------------------------------------------------Graduation Check Panels------------------------------------>  
<!----------------------------------------------------Graduation Check Panels------------------------------------> 
            
            <!-- buttom -->
            <div class="footer">
                <div class="col-sm-4">
                    <h3>Contace Us</h3>
                    <p>If you have any feedback or questions, please contact us</p>
                </div>
                <div class="col-sm-4">
                    <h3>Members:</h3>
                    <p>Hu Yifei</p>
                    <p>Wu Shiming</p>
                    <p>Koh Han Yan</p>
                    <p>Manish</p>
                </div>
                <div class="col-sm-4">
                    <h3>Column 3</h3>        
                    <p>....</p>
                    <p>....</p>
                </div>
            </div>
        
        
        </div>

        
        
         <Script>
             var userModules =[
                       {"id":"CS1010","type":"F","passed":true,"pre":[]},
                       {"id":"CS1020","type":"F","passed":true,"pre":["CS1010"]},
                       {"id":"CS1231","type":"F","passed":true},
                       {"id":"LAJ1201","type":"U","passed":true},
                       {"id":"CS2103","type":"F","passed":true},
                       {"id":"MA1101R","type":"F","passed":true},
                       {"id":"GEK1505","type":"L","passed":true},
                       {"id":"SSA2205","type":"L","passed":true},
                       {"id":"CS3242","type":"M","passed":false}
                 ]; 
             var requireModules =[
                       {"id":"CS1010","type":"F"},
                       {"id":"CS1020","type":"F"},
                       {"id":"CS1231","type":"F"},
                       {"id":"CS2010","type":"F"},
                       {"id":"CS2100","type":"F"},
                       {"id":"CS2101","type":"F"},
                       {"id":"CS2102","type":"F"},
                       {"id":"CS2103T","type":"F"},
                       {"id":"CS2105","type":"F"},
                       {"id":"CS3240","type":"F"},
                       {"id":"CS3241","type":"F"},
                       {"id":"IS1103","type":"F"},
                       {"id":"MA1101R","type":"F"},
                       {"id":"MA1521","type":"F"},
                       {"id":"MA1301","type":"F"},
                       {"id":"SS","type":"L"},
                       {"id":"ST2334","type":"F"}
                 ];  
                            
                                /*use this function to create an array based on user inputs*/
                            var ModuleArr = [1,2,2,3,1,1,1,1];
                            var No_ULR = 0, No_UEM = 0, No_MR = 0, No_FR= 0;
                            
                                /* if the button is clicked*/
                                $('#btnUpload').click(function() {
                                //read modules
                                    var i;
                                    var progBar_Name;
                                    var progBar_update;
                                    var progUpdate_Name;
                                    //var ModuleNo = $("#testtable").val();
                                    for (i = 0; i < ModuleArr.length; i++) {
                                        if (ModuleArr[i] == 0) {
                                        alert("Please Select a Module");
                                            return false;
                                        }
                                        else if(ModuleArr[i] == 1){   //this part can be checked with module database
                                            progBar_Name = 'progBar_ULR';
                                            progBar_update = 20;
                                            progUpdate_Name = 'progUpdate_ULR';
                                            No_ULR++;
                                        }
                                        else if(ModuleArr[i] == 2){
                                            progBar_Name = 'progBar_MR';
                                            progBar_update = 20;
                                            progUpdate_Name = 'progUpdate_MR';
                                            No_UEM++;
                                        }
                                        else if(ModuleArr[i] == 3){
                                            progBar_Name = 'progBar_FR';
                                            progBar_update = 20;
                                            progUpdate_Name = 'progUpdate_FR';
                                            No_MR++;
                                        }
                                        else if(ModuleArr[i] == 4){
                                            progBar_Name = 'progBar_UEM';
                                            progBar_update = 20;
                                            progUpdate_Name = 'progUpdate_UEM';
                                            No_FR++;
                                        }
                                        else{
                                            return false;
                                        }
                                    };
                                    progBarLoad('progBar_ULR',20*No_ULR,'progUpdate_ULR'); 
                                    progBarLoad('progBar_MR',20*No_MR,'progUpdate_MR'); 
                                    progBarLoad('progBar_FR',20*No_FR,'progUpdate_FR'); 
                                    progBarLoad('progBar_UEM',20*No_UEM,'progUpdate_UEM'); 
                                });
                                
                              
                                //used to update the progress bar
                                function progBarLoad(progBar_Name,progBar_update,progUpdate_Name){
                                    
                                    var bar = document.getElementById(progBar_Name),
                                        fallback = document.getElementById('downloadProgress'),
                                        loaded = 0;
                                    
                                    var Endloaded = loaded + progBar_update; 
                                    //var loaded = bar.value;
                                    
                                    var load = function() {
                                        loaded += progBar_update;
                                        
                                        bar.value = loaded;
                                        /* The below will be visible if the progress tag is not supported */
                                        $(fallback).empty().append("HTML5 progress tag not supported: ");
                                        
                                        if(progUpdate_Name == 'progUpdate_UEM'){
                                            if (loaded == Endloaded) {
                                                
                                                if(loaded != 100){
                                                    $('#progUpdate_UEM').empty().append(loaded + "%");
                                                }
                                                else{
                                                    $('#progUpdate_UEM').empty().append("Requirements Completed");
                                                }
                                            }
                                        }
                                        else if(progUpdate_Name == 'progUpdate_ULR'){
                                           
                                            if (loaded == Endloaded) {
                                                if(loaded != 100){
                                                    $('#progUpdate_ULR').empty().append(loaded + "%");
                                                }
                                                else{
                                                    $('#progUpdate_ULR').empty().append("Requirements Completed");
                                                }
                                            }
                                        }
                                        else if(progUpdate_Name == 'progUpdate_MR'){
                                        
                                            if (loaded == Endloaded) {
                                                if(loaded != 100){
                                                    $('#progUpdate_MR').empty().append(loaded + "%");
                                                }
                                                else{
                                                    $('#progUpdate_MR').empty().append("Requirements Completed");
                                                }
                                            }
                                        }
                                        else if(progUpdate_Name == 'progUpdate_FR'){
                                      
                                            if (loaded == Endloaded) {
                                                if(loaded != 100){
                                                    $('#progUpdate_FR').empty().append(loaded + "%");
                                                }
                                                else{
                                                    $('#progUpdate_FR').empty().append("Requirements Completed");
                                                }
                                            }
                                        }
                                    };
                                    
                                    load();
                                }
                            for(var i in userModules){
                                var button = document.createElement('button');
                                var id = document.createTextNode(userModules[i].id);
                                var state = "PASS";
                                if(!userModules[i].passed){
                                    state="AVAILABLE"
                                }
                                var stateE = document.createTextNode(state);
                                var stateDiv = document.createElement('div');
                                stateDiv.style.cssFloat="right";
                                button.appendChild(id);
                                stateDiv.appendChild(stateE);
                                button.appendChild(stateDiv);
                                var self=document.getElementById('info');
                                if(userModules[i].type=="F"){
                                    button.style.backgroundColor= "#B4FFA3";
                                }else if(userModules[i].type=="M"){
                                    button.style.backgroundColor= "#00F3FF";
                                }
                                else if(userModules[i].type=="U"){
                                    button.style.backgroundColor= "#F5ACEE";
                                }
                                else if(userModules[i].type=="L"){
                                    button.style.backgroundColor= "#FEFF80";
                                }
                                self.appendChild(button);
                            }
             
                        </Script>
        
        
        
    </body>
</html>